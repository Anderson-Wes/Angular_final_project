import{b as j,c as S,d as W,e as Y,g as H,i as J,j as K,k as Q,m as X,n as Z}from"./chunk-WCBENI67.js";import{a as ee}from"./chunk-R6ERBPII.js";import{a as $}from"./chunk-DUZIT3LW.js";import{A as V,B as c,E as q,I as C,K as x,M as g,N as f,O as b,P as h,Q as i,R as e,S as w,T as O,U as u,V as m,W as o,X as _,Y as z,Z as U,ea as G,ha as B,la as L,s as v,u as M,v as P,z as p}from"./chunk-VO7JYHVQ.js";function ne(r,t){r&1&&(i(0,"p",0),o(1,"Loading movie details..."),e())}function ie(r,t){if(r&1){let n=O();i(0,"button",16),u("click",function(){let a;M(n);let d=m(2);return P(d.openTrailer((a=d.movie())==null?null:a.Title))}),o(1," Watch Trailer "),e()}}function oe(r,t){r&1&&o(0," Remove from Favorites ")}function re(r,t){r&1&&o(0," Add to Favorites ")}function ce(r,t){if(r&1&&(i(0,"span"),o(1),e()),r&2){let n=t.$implicit;c(),U("",n.Source,": ",n.Value," \xA0")}}function le(r,t){r&1&&(i(0,"p",20),o(1,"Review must be at least 5 characters long."),e())}function ae(r,t){if(r&1){let n=O();i(0,"form",17),u("ngSubmit",function(){M(n);let a=m(2);return P(a.submitReview())}),i(1,"label",18),o(2,"Your Review:"),e(),w(3,"textarea",19),C(4,le,2,0,"p",20),i(5,"button",21),o(6," Submit Review "),e()()}if(r&2){let n=m(2);x("formGroup",n.reviewForm),c(4),g(n.reviewForm.controls.reviewText.invalid&&n.reviewForm.controls.reviewText.touched?4:-1),c(),x("disabled",n.reviewForm.invalid)}}function se(r,t){r&1&&(i(0,"p",13),o(1,"Please log in to leave a review."),e())}function _e(r,t){r&1&&(i(0,"p",14),o(1,"No reviews yet."),e())}function me(r,t){if(r&1){let n=O();i(0,"button",24),u("click",function(){M(n);let a=m().$implicit,d=m(3);return P(d.deleteReview(a.id,a.userId))}),o(1," Delete "),e()}}function de(r,t){if(r&1&&(i(0,"div",22)(1,"p")(2,"strong"),o(3),e(),o(4),e(),C(5,me,2,0,"button",23),e()),r&2){let n,l=t.$implicit,a=m(3);c(3),_(l.nickname),c(),z(": ",l.reviewText," "),c(),g(((n=a.authService.getCurrentUser())==null?null:n.id)===l.userId?5:-1)}}function ge(r,t){if(r&1&&(i(0,"div",15),b(1,de,6,3,"div",22,f),e()),r&2){let n=m(2);c(),h(n.reviews())}}function Ce(r,t){if(r&1){let n=O();i(0,"div",1)(1,"div",3)(2,"div",4)(3,"h1"),o(4),e(),w(5,"img",5),C(6,ie,2,0,"button",6),i(7,"button",7),u("click",function(){M(n);let a=m();return P(a.toggleFavorite())}),C(8,oe,1,0)(9,re,1,0),e()(),i(10,"div",8)(11,"table")(12,"tr",9)(13,"th"),o(14,"Ratings:"),e(),i(15,"td"),b(16,ce,2,2,"span",null,f),e()(),i(18,"tr")(19,"th"),o(20,"Release Date:"),e(),i(21,"td"),o(22),e()(),i(23,"tr")(24,"th"),o(25,"Country:"),e(),i(26,"td"),o(27),e()(),i(28,"tr")(29,"th"),o(30,"Director:"),e(),i(31,"td"),o(32),e()(),i(33,"tr")(34,"th"),o(35,"Genre:"),e(),i(36,"td"),o(37),e()(),i(38,"tr")(39,"th"),o(40,"Runtime:"),e(),i(41,"td"),o(42),e()(),i(43,"tr")(44,"th"),o(45,"Actors:"),e(),i(46,"td"),o(47),e()(),i(48,"tr")(49,"th"),o(50,"Box Office:"),e(),i(51,"td"),o(52),e()(),i(53,"tr")(54,"th"),o(55,"Awards:"),e(),i(56,"td"),o(57),e()()(),i(58,"div",10)(59,"h3"),o(60,"Description"),e(),i(61,"p"),o(62),e()()()(),i(63,"div",11)(64,"h3"),o(65,"Reviews"),e(),C(66,ae,7,3,"form",12)(67,se,2,0,"p",13)(68,_e,2,0,"p",14)(69,ge,3,0,"div",15),e()()}if(r&2){let n,l,a,d,T,D,E,k,y,F,I,R,N,A,s=m();c(4),_(((n=s.movie())==null?null:n.Title)||"No Title Available"),c(),x("src",((l=s.movie())==null?null:l.Poster)||"https://via.placeholder.com/300",V)("alt",(a=s.movie())==null?null:a.Title),c(),g((d=s.movie())!=null&&d.Title?6:-1),c(2),g(s.isFavorite()?8:9),c(8),h((T=s.movie())==null?null:T.Ratings),c(6),_(((D=s.movie())==null?null:D.Released)||"N/A"),c(5),_(((E=s.movie())==null?null:E.Country)||"N/A"),c(5),_(((k=s.movie())==null?null:k.Director)||"N/A"),c(5),_(((y=s.movie())==null?null:y.Genre)||"N/A"),c(5),_(((F=s.movie())==null?null:F.Runtime)||"N/A"),c(5),_(((I=s.movie())==null?null:I.Actors)||"N/A"),c(5),_(((R=s.movie())==null?null:R.BoxOffice)||"N/A"),c(5),_(((N=s.movie())==null?null:N.Awards)||"N/A"),c(5),_(((A=s.movie())==null?null:A.Plot)||"No Description Available"),c(4),g(s.authService.getCurrentUser()?66:67),c(2),g(s.reviews().length===0?68:69)}}function ve(r,t){r&1&&(i(0,"p",2),o(1,"Error loading movie details."),e())}var te=class r{route=v(L);movieService=v(ee);authService=v($);fb=v(Q);movie=p(null);reviews=p([]);isLoading=p(!0);isFavorite=p(!1);reviewForm=this.fb.group({reviewText:["",[S.required,S.minLength(5)]]});constructor(){G(()=>{let t=this.route.snapshot.paramMap.get("id"),n=this.authService.getCurrentUser();t&&this.movieService.getMovieDetails(t).subscribe(l=>{this.movie.set(l),this.isLoading.set(!1),this.movieService.getReviews(t).subscribe(a=>{this.reviews.set(a)}),n&&this.movieService.getFavorites(n.id).subscribe(a=>{this.isFavorite.set(a.some(d=>d.imdbID===t))})})})}toggleFavorite(){let t=this.authService.getCurrentUser();!t||!this.movie()||(this.isFavorite()?this.movieService.removeFromFavorites(t.id,this.movie().imdbID).subscribe(()=>{this.isFavorite.set(!1)}):this.movieService.addToFavorites(t.id,this.movie()).subscribe(()=>{this.isFavorite.set(!0)}))}openTrailer(t){let n=`${t} trailer`,l=`https://www.youtube.com/results?search_query=${encodeURIComponent(n)}`;window.open(l,"_blank")}submitReview(){let t=this.authService.getCurrentUser();if(!t)return;let n={userId:t.id,nickname:t.fullName,movieId:this.movie()?.imdbID,reviewText:this.reviewForm.value.reviewText};this.movieService.addReview(t.id,t.fullName,this.movie()?.imdbID,n.reviewText).subscribe(l=>{this.reviews.set([...this.reviews(),l]),this.reviewForm.reset()})}deleteReview(t,n){let l=this.authService.getCurrentUser();l&&l.id===n&&this.movieService.deleteReview(t).subscribe(()=>{this.reviews.set(this.reviews().filter(a=>a.id!==t))})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=q({type:r,selectors:[["app-movie-details"]],decls:3,vars:1,consts:[[1,"loading-text"],[1,"movie-details"],[1,"error-text"],[1,"movie-details-section"],[1,"poster-trailer-section"],[1,"movie-poster",3,"src","alt"],[1,"trailer-button"],[1,"favorites-btn",3,"click"],[1,"movie-info"],[1,"ratings"],[1,"description"],[1,"reviews-section"],[1,"review-form",3,"formGroup"],[1,"login-reminder"],[1,"no-reviews"],[1,"reviews-list"],[1,"trailer-button",3,"click"],[1,"review-form",3,"ngSubmit","formGroup"],["for","reviewText"],["id","reviewText","formControlName","reviewText"],[1,"error"],["type","submit",3,"disabled"],[1,"review-item"],[1,"delete-btn"],[1,"delete-btn",3,"click"]],template:function(n,l){n&1&&C(0,ne,2,0,"p",0)(1,Ce,70,16,"div",1)(2,ve,2,0,"p",2),n&2&&g(l.isLoading()?0:l.movie()?1:2)},dependencies:[B,X,H,j,W,Y,Z,J,K],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], applet[_ngcontent-%COMP%], object[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], blockquote[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], a[_ngcontent-%COMP%], abbr[_ngcontent-%COMP%], acronym[_ngcontent-%COMP%], address[_ngcontent-%COMP%], big[_ngcontent-%COMP%], cite[_ngcontent-%COMP%], code[_ngcontent-%COMP%], del[_ngcontent-%COMP%], dfn[_ngcontent-%COMP%], em[_ngcontent-%COMP%], img[_ngcontent-%COMP%], ins[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], q[_ngcontent-%COMP%], s[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], small[_ngcontent-%COMP%], strike[_ngcontent-%COMP%], strong[_ngcontent-%COMP%], sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%], tt[_ngcontent-%COMP%], var[_ngcontent-%COMP%], b[_ngcontent-%COMP%], u[_ngcontent-%COMP%], i[_ngcontent-%COMP%], center[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dt[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%], form[_ngcontent-%COMP%], label[_ngcontent-%COMP%], legend[_ngcontent-%COMP%], table[_ngcontent-%COMP%], caption[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], details[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], output[_ngcontent-%COMP%], ruby[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%], time[_ngcontent-%COMP%], mark[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}body[_ngcontent-%COMP%]{line-height:1}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none}blockquote[_ngcontent-%COMP%], q[_ngcontent-%COMP%]{quotes:none}blockquote[_ngcontent-%COMP%]:before, blockquote[_ngcontent-%COMP%]:after, q[_ngcontent-%COMP%]:before, q[_ngcontent-%COMP%]:after{content:"";content:none}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}a[_ngcontent-%COMP%]{text-decoration:none}*[_ngcontent-%COMP%]{box-sizing:border-box}.movie-details[_ngcontent-%COMP%]{max-width:1080px;margin:60px auto;padding:40px;color:#f1f1f1;background-color:#222d33;border-radius:8px;box-shadow:0 2px 10px #0006}@media (max-width: 1120px){.movie-details[_ngcontent-%COMP%]{margin:60px 20px}}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:40px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]{width:300px;flex-shrink:0}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:16px;color:#2e859e;font-size:28px;text-align:center}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;margin-bottom:12px;object-fit:cover;box-shadow:0 2px 8px #00000080}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .trailer-button[_ngcontent-%COMP%], .movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .favorites-btn[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:14px;border:none;border-radius:4px;background-color:#2e859e;color:#fff;cursor:pointer;transition:background-color .3s ease}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .trailer-button[_ngcontent-%COMP%]:hover, .movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .favorites-btn[_ngcontent-%COMP%]:hover{background-color:#ff5c5c}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .trailer-button[_ngcontent-%COMP%]:not(:last-child), .movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]   .favorites-btn[_ngcontent-%COMP%]:not(:last-child){margin-bottom:8px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{flex:1;color:#b3b3b3}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #383737}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:8px;color:#b3b3b3;width:150px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.ratings[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.ratings[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#414d58;border-radius:4px;padding:4px 8px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:16px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:8px;color:#fff;text-align:center}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:12px;border-radius:4px;line-height:1.4}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]{margin-top:32px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#b3b3b3}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical;border:1px solid #444;border-radius:4px;padding:8px;background-color:#414d58;color:#fff;font-size:14px;margin-bottom:8px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2e859e}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ff5c5c;font-size:14px;margin-bottom:8px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-end;padding:8px 16px;background-color:#2e859e;color:#fff;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:background-color .3s ease}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff5c5c}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#414d58;padding:10px;border-radius:4px}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#fff}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#b3b3b3}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:4px 8px;background-color:#2e859e;color:#fff;font-size:12px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.movie-details[_ngcontent-%COMP%]   .reviews-section[_ngcontent-%COMP%]   .reviews-list[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:#ff5c5c}@media (max-width: 768px){.movie-details[_ngcontent-%COMP%]{padding:20px}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .poster-trailer-section[_ngcontent-%COMP%]{width:100%;max-width:300px;text-align:center}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{width:100%}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto}.movie-details[_ngcontent-%COMP%]   .movie-details-section[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:20px}}']})};export{te as MovieDetailsComponent};
